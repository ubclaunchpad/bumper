package database

import (
	"log"
	"testing"

	"github.com/ubclaunchpad/bumper/server/models"
)

func TestConnectDB(t *testing.T) {
	// Connect to DB
	ConnectDB("../service-account.json")

	if DBC == nil {
		log.Fatal("DBClient not initialized correctly")
	}
}

func TestUpdateFetchPlayerScore(t *testing.T) {
	// Connect to DB
	ConnectDB("../service-account.json")

	// Create a Player
	p := new(models.Player)
	p.ID = "tester"
	p.Name = "tester"
	p.AddPoints(100)
	UpdatePlayerScore(p)

	returnScore := FetchPlayerScore(p)

	if returnScore.Name != p.Name || returnScore.Score != p.Points {
		log.Fatal("DBC did not store or retreve score correctly")
	}
}
